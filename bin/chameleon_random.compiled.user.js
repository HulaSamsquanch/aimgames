// ==UserScript==
// @name        Random Chameleon
// @description Auto color formatting for the chatbox.
// @namespace   too much grease
// @include     http://aimgames.forummotion.com/*
// @version     1
// @grant       none
// ==/UserScript==
// ==UserScript==// @name        Random Chameleon// @description Auto color formatting for the chatbox.// @namespace   too much grease// @include     http://aimgames.forummotion.com/*// @version     1// @grant       none// ==/UserScript==(function(d,m){if("function"===typeof define&&define.amd)define([],m);else if("object"===typeof exports){var h=m();"object"===typeof module&&module&&module.exports&&(exports=module.exports=h);exports.randomColor=h}else d.randomColor=m()})(this,function(){function d(a,b){switch(b.format){case "hsvArray":return a;case "hslArray":return r(a);case "hsl":var c=r(a);return"hsl("+c[0]+", "+c[1]+"%, "+c[2]+"%)";case "rgbArray":return p(a);case "rgb":return"rgb("+p(a).join(", ")+")";default:return f(a)}}function m(a){334<=a&&360>=a&&(a-=360);for(var b in q){var c=q[b];if(c.hueRange&&a>=c.hueRange[0]&&a<=c.hueRange[1])return q[b]}return"Color not found"}function h(a){if(null==n)return Math.floor(a[0]+Math.random()*(a[1]+1-a[0]));var b=a[1]||1;a=a[0]||0;n=(9301*n+49297)%233280;return Math.floor(a+n/233280*(b-a))}function f(a){function b(a){a=a.toString(16);return 1==a.length?"0"+a:a}a=p(a);return"#"+b(a[0])+b(a[1])+b(a[2])}function g(a,b,c){q[a]={hueRange:b,lowerBounds:c,saturationRange:[c[0][0],c[c.length-1][0]],brightnessRange:[c[c.length-1][1],c[0][1]]}}function p(a){var b=a[0];0===b&&(b=1);360===b&&(b=359);var b=b/360,c=a[1]/100;a=a[2]/100;var d=Math.floor(6*b),e=6*b-d,b=a*(1-c),h=a*(1-e*c),c=a*(1-(1-e)*c),l=e=256,k=256;switch(d){case 0:e=a;l=c;k=b;break;case 1:e=h;l=a;k=b;break;case 2:e=b;l=a;k=c;break;case 3:e=b;l=h;k=a;break;case 4:e=c;l=b;k=a;break;case 5:e=a,l=b,k=h}return[Math.floor(255*e),Math.floor(255*l),Math.floor(255*k)]}function r(a){var b=a[1]/100,c=a[2]/100,d=(2-b)*c;return[a[0],Math.round(b*c/(1>d?d:2-d)*1E4)/100,d/2*100]}var n=null,q={};g("monochrome",null,[[0,0],[100,0]]);g("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]);g("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]);g("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]);g("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]);g("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]);g("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]);g("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]);var t=function(a){a=a||{};a.seed&&!n&&(n=a.seed);var b,c,f;if(null!=a.count){b=a.count;c=[];for(a.count=null;b>c.length;)c.push(t(a));a.count=b;a.seed&&(n=a.seed);return c}a:{b=a.hue;if("number"===typeof parseInt(b)&&(c=parseInt(b),360>c&&0<c)){b=[c,c];break a}if("string"===typeof b&&q[b]&&(b=q[b],b.hueRange)){b=b.hueRange;break a}b=[0,360]}b=h(b);0>b&&(b=360+b);c=a;if("random"===c.luminosity)c=h([0,100]);else if("monochrome"===c.hue)c=0;else{var e=m(b).saturationRange;f=e[0];e=e[1];switch(c.luminosity){case "bright":f=55;break;case "dark":f=e-10;break;case "light":e=55}c=h([f,e])}f=a;a:{for(var e=c,g=m(b).lowerBounds,l=0;l<g.length-1;l++){var k=g[l][0],p=g[l][1],r=g[l+1][0],u=g[l+1][1];if(e>=k&&e<=r){g=(u-p)/(r-k);e=g*e+(p-g*k);break a}}e=0}k=100;switch(f.luminosity){case "dark":k=e+20;break;case "light":e=(k+e)/2;break;case "random":e=0,k=100}f=h([e,k]);return d([b,c,f],a)};return t});function setCookie(d,m,h){var f="";h?(f=new Date,f.setTime(f.getTime()+864E5*h),f="; expires="+f.toGMTString()):f="";document.cookie=d+"="+m+f+"; path=/"}function hexToRGB(d){d=d.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(d,h,f,g){return h+h+f+f+g+g});return(d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d))?{r:parseInt(d[1],16),g:parseInt(d[2],16),b:parseInt(d[3],16)}:null}if(null!==document.getElementById("frame_chatbox")||null!==document.getElementById("message"))1>=window.location.pathname.length?(new_col="#ffffff",document.getElementById("frame_chatbox").contentWindow.document.getElementById("message").addEventListener("keyup",function(d){13==(d.keyCode?d.keyCode:d.which)&&(new_col=randomColor(),setCookie("CB_color",new_col,1),document.getElementById("frame_chatbox").contentWindow.document.getElementById("scolor").value=new_col,document.getElementById("frame_chatbox").contentWindow.document.getElementById("divcolor-preview").style.cssText="background-color: rgb("+hexToRGB(new_col).r+", "+hexToRGB(new_col).g+", "+hexToRGB(new_col).b+");",document.getElementById("frame_chatbox").contentWindow.document.getElementById("message").style.color=new_col)},!1)):(new_col="#ffffff",document.getElementById("message").addEventListener("keyup",function(d){13==(d.keyCode?d.keyCode:d.which)&&(new_col=randomColor(),setCookie("CB_color",new_col,1),document.getElementById("scolor").value=new_col,document.getElementById("divcolor-preview").style.cssText="background-color: rgb("+hexToRGB(new_col).r+", "+hexToRGB(new_col).g+", "+hexToRGB(new_col).b+");",document.getElementById("message").style.color=new_col)},!1));